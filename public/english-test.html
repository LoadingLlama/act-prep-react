<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACT English Test</title>
    <link rel="stylesheet" href="shared-styles.css">
    <style>
        /* English-specific styles only */
        .passage-content {
            display: none;
            font-size: 1rem;
            line-height: 1.8;
            color: #1a1a1a;
        }

        .passage-content.active {
            display: block;
        }

        .underlined-text {
            text-decoration: underline;
            background: #fff3cd;
            padding: 0 2px;
        }

        .question-reference {
            background: #e0e7ff;
            color: #4338ca;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <!-- Header -->
        <header class="test-header">
            <div class="header-content">
                <div class="logo">actcourse.org</div>
                <div class="header-center">
                    <h1 class="test-title">English Test</h1>
                    <div class="question-counter" id="questionCounter">1 of 50</div>
                </div>
                <div class="header-right">
                    <div class="timer" id="timer">35:00</div>
                    <button class="btn btn-secondary" onclick="testUtils.showQuestionModal()">üìã Index</button>
                    <button class="btn btn-error" onclick="endSection()">End Section</button>
                </div>
            </div>
        </header>

        <!-- Main Test Content -->
        <main class="test-main">
            <div class="test-content">
                <!-- Flag Bar -->
                <div class="flag-bar">
                    <span class="item-number" id="itemNumber">Item 1</span>
                    <button class="flag-button" id="flagBtn" onclick="testUtils.toggleFlag()">üè≥Ô∏è Flag</button>
                </div>

                <!-- Passages Section -->
                <section class="passage-section">
                    <!-- Passage I -->
                    <div class="passage-content active" id="passage1">
                        <h3>Passage I</h3>
                        <p>
                            <span class="question-reference">[1]</span> The art of storytelling has been a fundamental part of human culture for thousands of years. <span class="underlined-text">From ancient cave paintings to modern digital media, stories have served</span> <span class="question-reference">[2]</span> as a way to pass down knowledge, values, and entertainment from one generation to the next.
                        </p>
                        <p>
                            In today's digital age, the medium through which we tell stories has evolved dramatically. <span class="question-reference">[3]</span> Traditional forms of storytelling, such as oral tradition and written literature, <span class="underlined-text">has been supplemented</span> <span class="question-reference">[4]</span> by films, television, video games, and social media platforms.
                        </p>
                        <p>
                            <span class="question-reference">[5]</span> Each medium offers unique advantages and challenges for storytellers. <span class="underlined-text">For example, films can use visual and auditory elements to create immersive experiences,</span> <span class="question-reference">[6]</span> while books allow readers to use their imagination more freely.
                        </p>
                        <!-- Continue with more passage content... -->
                    </div>

                    <!-- Additional passages would be added here -->
                </section>

                <!-- Questions Section -->
                <section class="questions-section">
                    <div class="questions-content">
                        <!-- Question 1 -->
                        <div class="question active" id="question1">
                            <div class="question-text">
                                <strong>1.</strong> Which choice best maintains the sentence's focus on the historical continuity of storytelling?
                            </div>
                            <ul class="choices">
                                <li class="choice" data-choice="A">
                                    <strong>A.</strong> NO CHANGE
                                </li>
                                <li class="choice" data-choice="B">
                                    <strong>B.</strong> Stories have always been important to people,
                                </li>
                                <li class="choice" data-choice="C">
                                    <strong>C.</strong> Throughout history, stories have provided
                                </li>
                                <li class="choice" data-choice="D">
                                    <strong>D.</strong> DELETE the underlined portion.
                                </li>
                            </ul>
                        </div>

                        <!-- Question 2 -->
                        <div class="question" id="question2">
                            <div class="question-text">
                                <strong>2.</strong>
                                <div class="choice" data-choice="F">
                                    <strong>F.</strong> NO CHANGE
                                </div>
                                <div class="choice" data-choice="G">
                                    <strong>G.</strong> as ways
                                </div>
                                <div class="choice" data-choice="H">
                                    <strong>H.</strong> to serve
                                </div>
                                <div class="choice" data-choice="J">
                                    <strong>J.</strong> DELETE the underlined portion.
                                </div>
                            </div>
                        </div>

                        <!-- Continue with more questions... -->
                        <!-- For demo purposes, I'll add a few more sample questions -->

                        <!-- Question 3 -->
                        <div class="question" id="question3">
                            <div class="question-text">
                                <strong>3.</strong> The writer is considering adding the following sentence here: "These new forms of media have transformed how we consume and create stories." Should the writer make this addition?
                            </div>
                            <ul class="choices">
                                <li class="choice" data-choice="A">
                                    <strong>A.</strong> Yes, because it provides a clear transition between the two paragraphs.
                                </li>
                                <li class="choice" data-choice="B">
                                    <strong>B.</strong> Yes, because it introduces the main topic of the following paragraph.
                                </li>
                                <li class="choice" data-choice="C">
                                    <strong>C.</strong> No, because it repeats information already stated in the passage.
                                </li>
                                <li class="choice" data-choice="D">
                                    <strong>D.</strong> No, because it shifts focus away from traditional storytelling methods.
                                </li>
                            </ul>
                        </div>

                        <!-- Questions 4-50 would continue here with actual content -->
                        <!-- For the sake of this demo, I'll create placeholders for the remaining questions -->
                    </div>
                </section>

                <!-- Question Sidebar -->
                <div class="question-sidebar">
                    <div class="sidebar-icon" onclick="testUtils.showQuestionModal()">üìã</div>
                    <div class="sidebar-text">Index</div>
                </div>
            </div>
        </main>

        <!-- Navigation -->
        <nav class="navigation">
            <button class="nav-button" id="prevBtn" onclick="testUtils.previousQuestion()" disabled>‚Üê Previous</button>
            <div class="question-info">Question <span id="currentQuestionNum">1</span> of 50</div>
            <button class="nav-button primary" id="nextBtn" onclick="testUtils.nextQuestion()">Next ‚Üí</button>
        </nav>
    </div>

    <!-- Question Modal -->
    <div id="questionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üìã Question Navigator</h2>
                <button class="close-btn" onclick="testUtils.closeQuestionModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="question-grid" id="questionGrid">
                    <!-- Generated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="test-utils.js"></script>
    <script>
        // Initialize test utilities
        const testUtils = new ACTTestUtils();

        // Test configuration
        const testConfig = {
            sectionName: 'English',
            totalQuestions: 50,
            duration: 35 // minutes
        };

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            testUtils.setupTest(testConfig);

            // Generate remaining questions dynamically for demo
            generateRemainingQuestions();
        });

        function generateRemainingQuestions() {
            const questionsContainer = document.querySelector('.questions-content');

            // Generate questions 4-50 as placeholders
            for (let i = 4; i <= 50; i++) {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.id = `question${i}`;

                const isEvenNumbered = i % 2 === 0;
                const choices = isEvenNumbered ? ['F', 'G', 'H', 'J'] : ['A', 'B', 'C', 'D'];

                questionDiv.innerHTML = `
                    <div class="question-text">
                        <strong>${i}.</strong> Sample question ${i} - Which choice best completes the sentence?
                    </div>
                    <ul class="choices">
                        ${choices.map(choice => `
                            <li class="choice" data-choice="${choice}">
                                <strong>${choice}.</strong> Sample answer choice ${choice}
                            </li>
                        `).join('')}
                    </ul>
                `;

                questionsContainer.appendChild(questionDiv);
            }

            // Re-initialize choice listeners after adding questions
            testUtils.initializeChoiceListeners();
        }

        function endSection() {
            if (confirm('Are you sure you want to end this section? You will not be able to return to it.')) {
                testUtils.endSection();
            }
        }

        // Handle modal clicks outside content
        document.getElementById('questionModal').addEventListener('click', function(e) {
            if (e.target === this) {
                testUtils.closeQuestionModal();
            }
        });
    </script>
</body>
</html>